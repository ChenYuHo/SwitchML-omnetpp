[General]
network = TwoLayers
simtime-resolution = ps
**.switch_ports = 16
**.max_jobs_to_submit = 2
**.file = "60_job.csv"
**.num_slots = 512
**.MTU = 9000
**.num_gpus = 8
**.collective_scheduler.typename = "None"
**.datarate = 100Gbps
**.delay = 1us
**.job_placement = "random_multiracks"
#include partition.ini

[Exp60Jobs]
**.switch_ports = 4
**.num_gpus = 4
**.max_jobs_to_submit = 99
**.job_placement = ${JobPlacement="random_singlerack", "random_multiracks", "random_distributed", "random"}
**.collective_scheduler.typename = ${CollectiveScheduler="None", "FifoExclusive", "ByteScheduler"}
**.tors**.cmdenv-log-level = off
**.submit_all_when_start = ${SubmitAllAtStart=true, false}
**.gpu_scale_factor = 2

[TestCollectiveScheduler]
**.num_slots = 5
**.num_updates = 1000
**.num_gpus = 4
**.MTU = 1500
**.file = "1.csv"
**.switch_ports = 3
**.max_jobs_to_submit = 3

[TestFifoExclusive]
extends = TestCollectiveScheduler
**.collective_scheduler.typename = "FifoExclusive"

[TestByteScheduler]
# should see:
# layer 2 chunk 1
# layer 0 chunk 1
# layer 0 chunk 2
# layer 1 chunk 1
# layer 1 chunk 2
# layer 2 chunk 2
extends = TestCollectiveScheduler
**.custom_model = true
**.custom_model_sizes = "100,100,100"
**.custom_fp_times = "2,3,4"
**.custom_bp_times = "7,8,9"
**.custom_wu_times = "3,7,9"
**.custom_iters = 3
**.collective_scheduler.typename = "ByteScheduler"
**.chunk_size = 90
**.max_jobs_to_submit = 1
**.collective_scheduler.cmdenv-log-level = debug
**Rank0**.cmdenv-log-level = debug
**.cmdenv-log-level = off


[TestEvLog]
**.num_slots = 2
**.num_updates = 10
**.num_gpus = 4
**.MTU = 1500
**.file = "1.csv"
**.switch_ports = 2

[TwoJobs]
**.collective_scheduler.typename = "None"

[Bert300]
**.file = "300_bert.csv"
**.job_placement = ${JobPlacement="random_singlerack", "random_multiracks", "random_distributed", "random"}
**.max_jobs_to_submit = 9999
**.collective_scheduler.typename = ${CollectiveScheduler="None", "FifoExclusive", "ByteScheduler"}
**.tors**.cmdenv-log-level = off

[SwitchMLPaper]
**.tor_core_channel.typename = "Ideal"
**.delay = 1us
**.MTU = 0
**.num_updates = ${nu=64, 256}
**.datarate = ${bw=10, 100}Gbps
**.num_slots = ${ns=128, 512 ! bw}
**.switch_ports = 3
**.num_gpus = 2
**.file = "1.csv"
**.max_jobs_to_submit = 1
**.job_placement = "random_singlerack"
**.custom_model = true
**.custom_model_sizes = "26214400"
#**.custom_fp_times = "1000000000000,1000000000000"
#**.custom_bp_times = "2000000000000,2000000000000"
#**.custom_wu_times = "3000000000000,3000000000000"
**.custom_iters = 1
#**.result-recording-modes = -
#**.tor_worker_channel**.result-recording-modes = all,+vector,+histogram
#**.job_dispatcher.**.result-recording-modes = -
#**.workers[*].**.result-recording-modes = -
#**.workers[*].**.result-recording-modes = -
